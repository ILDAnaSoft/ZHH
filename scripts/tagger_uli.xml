<marlin>

<execute>
  <processor name="AIDA"/>
  <processor name="InitDD4hep"/>
  <processor name="Statusmonitor"/>
  <!--processor name="FastJetOverlay"/>
  <processor name="ExpandJet"/-->
  <processor name="Thrust"/>
  <processor name="Sphere"/>
  <processor name="Fox"/>
  <processor name="IsolatedMuonTagging"/>
  <processor name="IsolatedElectronTagging"/>
  <processor name="IsolatedTauTagging"/>
  <processor name="IsolatedPhotonTagging"/>
<!--   <processor name="JC2FT"/> -->
<!--   <processor name="EF2"/> -->
<!--   <processor name="JC3FT"/> -->
<!--   <processor name="EF3"/> -->
  <processor name="JC4FT"/>
  <processor name="EF4"/>
<!--   <processor name="JC5FT"/> -->
<!--   <processor name="EF5"/> -->
<!--   <processor name="JC6FT"/> -->
<!--   <processor name="EF6"/> -->
  <if condition="${RundEdxCorrections}">
    <processor name="ComputeCorrectAngulardEdX"/>
    <processor name="LikelihoodPID"/>
    <processor name="LeptonID"/>
    <processor name="ComprehensivePID"/>
  </if>
  <processor name="WWCategorisation"/>
  <processor name="ParticleIDFilter"/>
  
<!--   <processor name="StoreVariablesForDeepMLFlavorTagger_2J"/> -->
<!--   <processor name="ParticleNetTagger_2J"/> -->
<!--   <processor name="ParticleIDFilter_2J"/> -->
<!--   <processor name="StoreVariablesForDeepMLFlavorTagger_3J"/> -->
<!--   <processor name="ParticleNetTagger_3J"/> -->
<!--   <processor name="ParticleIDFilter_3J"/> -->
  <processor name="StoreVariablesForDeepMLFlavorTagger_4J"/>
  <processor name="ParticleNetTagger_4J"/>
  <processor name="ParticleIDFilter_4J"/>
<!--   <processor name="StoreVariablesForDeepMLFlavorTagger_5J"/> -->
<!--   <processor name="ParticleNetTagger_5J"/> -->
<!--   <processor name="ParticleIDFilter_5J"/> -->
<!--   <processor name="StoreVariablesForDeepMLFlavorTagger_6J"/> -->
<!--   <processor name="ParticleNetTagger_6J"/> -->
<!--   <processor name="ParticleIDFilter_6J"/> -->
  
  <processor name="LCIOOutputProcessor"/>
</execute>

<global>
  <parameter name="LCIOInputFiles">
    /pnfs/desy.de/ilc/prod/ilc/mc-2020/ild/dst-merged/250-SetA/flavortag/ILD_l5_o1_v02/v02-02/rv02-02.sv02-02.mILD_l5_o1_v02.E250-SetA.I500338.P4f-lcfi_zz_bbbb.eL.pR.n000.d_dstm_15033_0.slcio
  </parameter>
  <parameter name="MaxRecordNumber" value="0" />
  <parameter name="SkipNEvents" value="0" />
  <parameter name="SupressCheck" value="false" />
  <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> DEBUG </parameter>
</global>

<constants>
  <constant name="OutputFile" value="/nfs/dust/ilc/user/ueinhaus/work/WWCKM/FT4q/MiniDSTOut_FT4q_bbbb_0.slcio"/>
  <constant name="ProductionDir" value="."/>
  <constant name="RundEdxCorrections" value="true"/>
  <constant name="lcgeo_DIR" value=$lcgeo_DIR/>

  <constant name="LCFIPlusConfig_DIR" value="./LCFIPlusConfig"/>
  <constant name="LCFIPlusVertexPrefix" value="ildl5_4q250_ZZ"/>
  <constant name="LCFIPlusD0ProbFile" value="${LCFIPlusConfig_DIR}/vtxprob/d0probv2_${LCFIPlusVertexPrefix}.root"/>
  <constant name="LCFIPlusZ0ProbFile" value="${LCFIPlusConfig_DIR}/vtxprob/z0probv2_${LCFIPlusVertexPrefix}.root"/>
  <constant name="LCFIPlusWeightsPrefix" value="4q250_v04_p00_ildl5"/>
  <constant name="LCFIPlusWeightsDir" value="${LCFIPlusConfig_DIR}/lcfiweights/4q250_ZZ_v4_p00_ildl5"/>

  <constant name="IsolatedLeptonTagging_DIR" value="./IsolatedLeptonTagging"/>
  <constant name="ElectronIsolationWeightsDir" value="${IsolatedLeptonTagging_DIR}/weights/e1e1h_gg_qqqq_250"/>
  <constant name="MuonIsolationWeightsDir" value="${IsolatedLeptonTagging_DIR}/weights/e2e2h_gg_qqqq_250"/>
</constants>

<processor name="AIDA" type="AIDAProcessor">
  <parameter name="Compress" type="int">1 </parameter>
  <parameter name="FileName" type="string"> /nfs/dust/ilc/user/ueinhaus/work/WWCKM/FT4q/AIDAFile_FT4q_bbbb_0.root </parameter>
  <parameter name="FileType" type="string">root </parameter>
</processor>

<processor name="InitDD4hep" type="InitializeDD4hep">
  <parameter name="DD4hepXMLFile" type="string"> /cvmfs/sw.hsf.org/key4hep/releases/2024-03-10/x86_64-almalinux9-gcc11.3.1-opt/k4geo/0.20-hapqru/share/k4geo/ILD/compact/ILD_l5_v02/ILD_l5_v02.xml </parameter>
  <parameter name="Verbosity"> SILENT </parameter>
</processor>

<processor name="Statusmonitor" type="Statusmonitor">
    <!--Statusmonitor prints out information on running Marlin Job: Prints number of runs run and current number of the event. Counting is sequential and not the run or event ID.-->
    <!--Print the event number every N events-->
    <parameter name="HowOften" type="int"> 1 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!-- <parameter name="Verbosity" type="string">MESSAGE </parameter> -->
</processor>


<processor name="FastJetOverlay" type="FastJetProcessor">
  <parameter name="recParticleIn" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
  <parameter name="jetOut" type="string" lcioOutType="ReconstructedParticle"> PFOsminusoverlayJets </parameter>
  <parameter name="algorithm" type="StringVec"> ee_genkt_algorithm 3.0 1.0 </parameter>
  <parameter name="clusteringMode" type="StringVec"> ExclusiveNJets 2 </parameter>
  <parameter name="recombinationScheme" type="string">E_scheme </parameter>
</processor>

<processor name="ExpandJet" type="ExpandJetProcessor">
  <parameter name="InputCollection" type="string"> PFOsminusoverlayJets </parameter>
  <parameter name="OutputCollection" type="string"> PFOsminusoverlay </parameter>
</processor>

<processor name="Thrust" type="ThrustReconstruction">
 <!--Calculates thrust axis and thrust value of event using different algorithms-->  <!--Name of collection of reconstructed particles used for thrust reconstruction-->
  <parameter name="inputCollectionName" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
  <!--parameter name="inputCollectionName" type="string" lcioInType="ReconstructedParticle"> PandoraPFOsNew </parameter-->
  <!--Type of thrust reconstruction algorithm to be used:  1 : Tasso algorithm  2 : JetSet algorithm-->
  <parameter name="typeOfThrustFinder" type="int"> 2 </parameter>
</processor>

<processor name="Sphere" type="Sphere">
  <parameter name="CollectionName" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
  <parameter name="r_value" type="float"> 2.0 </parameter>
</processor>

<processor name="Fox" type="Fox">
  <parameter name="NameOfReconstructedParticlesCollection" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
</processor>

<processor name="IsolatedMuonTagging" type="IsolatedLeptonTaggingProcessor">
  <!--IsolatedLeptonTaggingProcessor does whatever it does ...-->
  <!--cosine of the larger cone-->
  <parameter name="CosConeLarge" type="float">0.95 </parameter>
  <!--cosine of the smaller cone-->
  <parameter name="CosConeSmall" type="float">0.98 </parameter>
  <!--Cut on the mva output of isolated electron selection-->
  <parameter name="CutOnTheISOElectronMVA" type="float"> 2 </parameter>
  <!--Cut on the mva output of isolated muon selection-->
  <parameter name="CutOnTheISOMuonMVA" type="float">0.7 </parameter>
  <!--Directory of Weights for the Isolated Electron MVA Classification-->
  <parameter name="DirOfISOElectronWeights" type="string">
  ${ElectronIsolationWeightsDir}
  </parameter>
  <!--Directory of Weights for the Isolated Muon MVA Classification-->
  <parameter name="DirOfISOMuonWeights" type="string">
  ${MuonIsolationWeightsDir}
  </parameter>

  <!--Name of the PandoraPFOs collection-->
  <parameter name="InputPandoraPFOsCollection" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
  <!--Name of the Primary Vertex collection-->
  <parameter name="InputPrimaryVertexCollection" type="string" lcioInType="ReconstructedParticle"> PrimaryVertex </parameter>
  <!--flag to select one most like isolated lepton-->
  <parameter name="IsSelectingOneIsoLep" type="bool"> false </parameter>
  <!--Maximum d0 significance for electron-->
  <parameter name="MaxD0SigForElectron" type="float">50 </parameter>
  <!--Maximum D0 significance for muon-->
  <parameter name="MaxD0SigForMuon" type="float">20 </parameter>
  <!--Maximum ratio of energy in calorimeters over momentum for electron-->
  <parameter name="MaxEOverPForElectron" type="float">1.3 </parameter>
  <!--Maximum ratio of energy in calorimeters over momentum for muon-->
  <parameter name="MaxEOverPForMuon" type="float">0.3 </parameter>
  <!--Maximum Z0 significance for electron-->
  <parameter name="MaxZ0SigForElectron" type="float">50 </parameter>
  <!--Maximum Z0 significance for muon-->
  <parameter name="MaxZ0SigForMuon" type="float">20 </parameter>
  <!--minimum ratio of energy in calorimeters over momentum for electron-->
  <parameter name="MinEOverPForElectron" type="float">0.5 </parameter>
  <!--minimum ratio of energy in ecal over energy in ecal+hcal-->
  <parameter name="MinEecalOverTotEForElectron" type="float">0.9 </parameter>
  <!--use yoke for muon ID-->
  <parameter name="UseYokeForMuonID" type="bool"> true </parameter>
  <!--Minimum energy in yoke for electron-->
  <parameter name="MinEyokeForMuon" type="float">1.2 </parameter>
  <!--Minimum momentum for electron-->
  <parameter name="MinPForElectron" type="float">5 </parameter>
  <!--Minimum momentum for muon-->
  <parameter name="MinPForMuon" type="float">5 </parameter>
  <!--use impact parameters-->
  <parameter name="UseIP" type="bool"> true </parameter>
  <!--Name of collection with the selected isolated lepton-->
  <parameter name="OutputIsoLeptonsCollection" type="string" lcioOutType="ReconstructedParticle"> IsolatedMuons </parameter>
  <!--Name of the new PFOs collection without isolated lepton-->
  <parameter name="OutputPFOsWithoutIsoLepCollection" type="string" lcioOutType="ReconstructedParticle"> PFOsminusmu </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string"> SILENT </parameter>
</processor>

<processor name="IsolatedElectronTagging" type="IsolatedLeptonTaggingProcessor">
  <!--IsolatedLeptonTaggingProcessor does whatever it does ...-->
  <!--cosine of the larger cone-->
  <parameter name="CosConeLarge" type="float">0.95 </parameter>
  <!--cosine of the smaller cone-->
  <parameter name="CosConeSmall" type="float">0.98 </parameter>
  <!--Cut on the mva output of isolated electron selection-->
  <parameter name="CutOnTheISOElectronMVA" type="float"> 0.5 </parameter>
  <!--Cut on the mva output of isolated muon selection-->
  <parameter name="CutOnTheISOMuonMVA" type="float"> 2 </parameter>
  <!--Directory of Weights for the Isolated Electron MVA Classification-->
  <parameter name="DirOfISOElectronWeights" type="string">
  ${ElectronIsolationWeightsDir}
  </parameter>
  <!--Directory of Weights for the Isolated Muon MVA Classification-->
  <parameter name="DirOfISOMuonWeights" type="string">
  ${MuonIsolationWeightsDir}
  </parameter>
  <!--Name of the PandoraPFOs collection-->
  <parameter name="InputPandoraPFOsCollection" type="string" lcioInType="ReconstructedParticle"> PFOsminusmu </parameter>
  <!--Name of the Primary Vertex collection-->
  <parameter name="InputPrimaryVertexCollection" type="string" lcioInType="ReconstructedParticle"> PrimaryVertex </parameter>
  <!--flag to select one most like isolated lepton-->
  <parameter name="IsSelectingOneIsoLep" type="bool"> false </parameter>
  <!--Maximum d0 significance for electron-->
  <parameter name="MaxD0SigForElectron" type="float"> 10 </parameter>
  <!--Maximum D0 significance for muon-->
  <parameter name="MaxD0SigForMuon" type="float"> 10 </parameter>
  <!--Maximum ratio of energy in calorimeters over momentum for electron-->
  <parameter name="MaxEOverPForElectron" type="float">1.3 </parameter>
  <!--Maximum ratio of energy in calorimeters over momentum for muon-->
  <parameter name="MaxEOverPForMuon" type="float">0.3 </parameter>
  <!--Maximum Z0 significance for electron-->
  <parameter name="MaxZ0SigForElectron" type="float"> 10 </parameter>
  <!--Maximum Z0 significance for muon-->
  <parameter name="MaxZ0SigForMuon" type="float"> 10 </parameter>
  <!--minimum ratio of energy in calorimeters over momentum for electron-->
  <parameter name="MinEOverPForElectron" type="float">0.5 </parameter>
  <!--minimum ratio of energy in ecal over energy in ecal+hcal-->
  <parameter name="MinEecalOverTotEForElectron" type="float">0.9 </parameter>
  <!--use yoke for muon ID-->
  <parameter name="UseYokeForMuonID" type="bool"> true </parameter>
  <!--Minimum energy in yoke for electron-->
  <parameter name="MinEyokeForMuon" type="float">1.2 </parameter>
  <!--Minimum momentum for electron-->
  <parameter name="MinPForElectron" type="float">5 </parameter>
  <!--Minimum momentum for muon-->
  <parameter name="MinPForMuon" type="float">5 </parameter>
  <!--use impact parameters-->
  <parameter name="UseIP" type="bool"> true </parameter>
  <!--Name of collection with the selected isolated lepton-->
  <parameter name="OutputIsoLeptonsCollection" type="string" lcioOutType="ReconstructedParticle"> IsolatedElectrons </parameter>
  <!--Name of the new PFOs collection without isolated lepton-->
  <parameter name="OutputPFOsWithoutIsoLepCollection" type="string" lcioOutType="ReconstructedParticle"> PFOsminuse </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string"> SILENT </parameter>
</processor>

<processor name="IsolatedTauTagging" type="TaJetClustering">
  <!--Input PFO collection-->
  <parameter name="PFOCollection" type="string" lcioInType="ReconstructedParticle"> PFOsminuse </parameter>
  <!--Tau output collection-->
  <parameter name="OutputTauCollection" type="string" lcioOutType="ReconstructedParticle"> IsolatedTaus </parameter>
  <!--Remained PFO collection not clustered-->
  <parameter name="RemainPFOCollection" type="string" lcioOutType="ReconstructedParticle"> PFOsminustau </parameter>
  <!--Tau mass for tau clustering [GeV]-->
  <parameter name="TauMass" type="double">2 </parameter>
  <!--Allowed cosine angle to be clustered-->
  <parameter name="TauCosAngle" type="double">0.98 </parameter>
  <!-- Skip ANY Primary and Cone cuts if true: should be only used in lepton-only final states! -->
  <parameter name="NoSelection" type="int">0 </parameter>
  <!--Primary cut include IMPLICIT selection of accepting only 1 or 3 tracks in jets: this loosen the counting of low energy tracks-->
  <parameter name="AcceptFlexibleLowEnergyTrack" type="int">1 </parameter>
  <!--Minimum jet energy to be accepted as taus-->
  <parameter name="MinimumJetEnergy" type="double">3 </parameter>
  <!--Minimum track energy to be accepted as taus-->
  <parameter name="MinimumTrackEnergy" type="double">2 </parameter>
  <!--Minimum track energy to be counted-->
  <parameter name="MinimumTrackEnergyAssoc" type="double">2 </parameter>
  <!--Minimum cosine angle for cone-->
  <parameter name="ConeMinCosAngle" type="double">0.9 </parameter>
  <!--Maximum cosine angle for cone-->
  <parameter name="ConeMaxCosAngle" type="double">1 </parameter>
  <!--Energy fraction of cone compared to central-->
  <parameter name="ConeMaxEnergyFrac" type="double">0.1 </parameter>
</processor>

<processor name="IsolatedPhotonTagging" type="IsolatedPhotonTaggingProcessor">
  <parameter name="InputPandoraPFOsCollection" type="string" lcioInType="ReconstructedParticle"> PFOsminustau </parameter>
  <parameter name="OutputPFOsWithoutIsoPhotonCollection" type="string" lcioInType="ReconstructedParticle"> PFOsminusphoton </parameter>
  <parameter name="OutputIsoPhotonsCollection" type="string" lcioInType="ReconstructedParticle"> IsolatedPhotons </parameter>
  <parameter name="DirOfIsoPhotonWeights" type="string"> isolated_photon_weights </parameter>
  <parameter name="CutOnTheISOPhotonMVA" type="float"> 0.5 </parameter>
  <parameter name="IsSelectingOneIsoPhoton" type="bool"> false </parameter>
  <parameter name="MinEForPhoton" type="float"> 5. </parameter>
  <parameter name="CosConeSmall" type="float"> 0.98 </parameter>
  <parameter name="CosConeLarge" type="float"> 0.95 </parameter>
</processor>

<processor name="JC2FT" type="LcfiplusProcessor">
  <!-- run primary and secondary vertex finders -->
  <parameter name="Algorithms" type="stringVec"> JetClustering JetVertexRefiner FlavorTag ReadMVA</parameter>

  <!-- general parameters -->
  <parameter name="PFOCollection" type="string" value="PFOsminusphoton" /> <!-- input PFO collection -->
  <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
  <parameter name="MCPCollection" type="string" value="" /> <!-- not used -->
  <parameter name="MCPFORelation" type="string" value="" /> <!-- not used -->
  <parameter name="ReadSubdetectorEnergies" type="int" value="1"/> <!-- true for ILD -->
  <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
  <parameter name="TrackHitOrdering" type="int" value="1"/> <!-- Track hit ordering: 0=ILD-LOI,SID-DBD, 1=ILD-DBD -->
  <parameter name="PrintEventNumber" type="int" value="0"/> <!-- 0 for not printing event number, n for printing every n events -->

  <!-- jet clustering parameters -->
  <parameter name="JetClustering.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetClustering.InputVertexCollectionName" type="string" value="BuildUpVertex" /> <!-- vertex collections to be used in JC -->
  <parameter name="JetClustering.OutputJetCollectionName" type="stringVec" value="Vertex2Jets" /> <!-- output collection name, may be multiple -->
  <parameter name="JetClustering.NJetsRequested" type="intVec" value="2" /> <!-- Multiple NJets can be specified -->
  <parameter name="JetClustering.YCut" type="doubleVec" value="0." /> <!-- specify 0 if not used -->

  <parameter name="JetClustering.JetAlgorithm" type="string" value="DurhamVertex" /> <!-- jet algorithm -->
  <parameter name="JetClustering.UseBeamJets" type="int" value="0" /> <!-- beam jet rejection -->
  <!--parameter name="JetClustering.RParameter" type="float" value="1.0" />
  <parameter name="JetClustering.BetaParameter" type="float" value="1.0" />
  <parameter name="JetClustering.GammaParameter" type="float" value="1.0" /-->

  <parameter name="JetClustering.UseMuonID" type="int" value="1" /> <!-- jet-muon ID for jet clustering -->
  <parameter name="JetClustering.MuonIDExternal" type="int" value="0" /> <!-- true to use LikelihoodPID, false for good-old simple one -->
  <parameter name="JetClustering.MuonIDMinimumD0Significance" type="double" value="5." /> <!-- min D0 significance -->
  <parameter name="JetClustering.MuonIDMinimumZ0Significance" type="double" value="5." /> <!-- min Z0 significance -->
  <parameter name="JetClustering.MuonIDMaximum3DImpactParameter" type="double" value="5." /> <!-- max 3D significance -->
  <parameter name="JetClustering.MuonIDMinimumProbability" type="double" value="0.5" /> <!-- min PID probability, only for external -->

  <parameter name="JetClustering.VertexSelectionMinimumDistance" type="double" value="0.3" /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionMaximumDistance" type="double" value="30." /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionK0MassWidth" type="double" value="0.02" /> <!-- in GeV -->

  <!-- vertex refiner parameters -->
  <parameter name="JetVertexRefiner.InputJetCollectionName" type="string" value="Vertex2Jets" />
  <parameter name="JetVertexRefiner.OutputJetCollectionName" type="string" value="Refined2Jets" />
  <parameter name="JetVertexRefiner.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetVertexRefiner.InputVertexCollectionName" type="string" value="BuildUpVertex" />
  <parameter name="JetVertexRefiner.V0VertexCollectionName" type="string" value="BuildUpVertex_V0" />
  <parameter name="JetVertexRefiner.OutputVertexCollectionName" type="string" value="RefinedVertex2Jets" />

  <parameter name="JetVertexRefiner.MinPosSingle" type="double" value="0.3" />
  <parameter name="JetVertexRefiner.MaxPosSingle" type="double" value="30." />
  <parameter name="JetVertexRefiner.MinEnergySingle" type="double" value="1." />
  <parameter name="JetVertexRefiner.MaxAngleSingle" type="double" value="0.5" />
  <parameter name="JetVertexRefiner.MaxSeparationPerPosSingle" type="double" value="0.1" />
  <parameter name="JetVertexRefiner.mind0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.minz0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.OneVertexProbThreshold" type="double" value="0.001" />
  <parameter name="JetVertexRefiner.MaxCharmFlightLengthPerJetEnergy" type="double" value="0.1" />

  <!-- FlavorTag parameters -->
  <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="FlavorTag.JetCollectionName" type="string" value="Refined2Jets" />
  <parameter name="MakeNtuple.AuxiliaryInfo" type="int" value="-1" />
  <parameter name="FlavorTag.WeightsDirectory" type="string" value="${LCFIPlusWeightsDir}"/>
  <parameter name="FlavorTag.WeightsPrefix" type="string" value="${LCFIPlusWeightsPrefix}" />
  <parameter name="FlavorTag.BookName" type="string" value="bdt" />
  <parameter name="FlavorTag.PIDAlgo" type="string" value="lcfiplus" />
  <parameter name="FlavorTag.D0ProbFileName" type="string" value="${LCFIPlusD0ProbFile}"/>
  <parameter name="FlavorTag.Z0ProbFileName" type="string" value="${LCFIPlusZ0ProbFile}"/>

  <parameter name="FlavorTag.CategoryDefinition1" type="string">nvtx==0</parameter>
  <parameter name="FlavorTag.CategoryPreselection1" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables1" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr25sigma jprobz25sigma
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2 nmuon nelectron trkmass
  </parameter>
  <parameter name="FlavorTag.CategorySpectators1" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition2" type="string">nvtx==1&&nvtxall==1</parameter>
  <parameter name="FlavorTag.CategoryPreselection2" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables2" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2
    trkmass nelectron nmuon
  </parameter>
  <parameter name="FlavorTag.CategorySpectators2" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition3" type="string">nvtx==1&&nvtxall==2</parameter>
  <parameter name="FlavorTag.CategoryPreselection3" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables3" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    1vtxprob vtxlen12all_jete vtxmassall
  </parameter>
  <parameter name="FlavorTag.CategorySpectators3" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition4" type="string">nvtx>=2</parameter>
  <parameter name="FlavorTag.CategoryPreselection4" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables4" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    vtxlen2_jete vtxsig2_jete vtxdirang2_jete vtxmom2_jete vtxmass2 vtxmult2
    vtxlen12_jete vtxsig12_jete vtxdirang12_jete vtxmom_jete vtxmass vtxmult
    1vtxprob
  </parameter>
  <parameter name="FlavorTag.CategorySpectators4" type="stringVec">
    aux nvtx
  </parameter>
</processor>

<processor name="EF2" type="ErrorFlow">
  <parameter name="InputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined2Jets </parameter>
  <parameter name="OutputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined2JetsEF </parameter>
  <parameter name="InputMCTruthLinkCollection" type="string" lcioInType="LCRelation"> RecoMCTruthLink </parameter>
</processor>

<processor name="JC3FT" type="LcfiplusProcessor">
  <!-- run primary and secondary vertex finders -->
  <parameter name="Algorithms" type="stringVec"> JetClustering JetVertexRefiner FlavorTag ReadMVA</parameter>

  <!-- general parameters -->
  <parameter name="PFOCollection" type="string" value="PFOsminusphoton" /> <!-- input PFO collection -->
  <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
  <parameter name="MCPCollection" type="string" value="" /> <!-- not used -->
  <parameter name="MCPFORelation" type="string" value="" /> <!-- not used -->
  <parameter name="ReadSubdetectorEnergies" type="int" value="1"/> <!-- true for ILD -->
  <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
  <parameter name="TrackHitOrdering" type="int" value="1"/> <!-- Track hit ordering: 0=ILD-LOI,SID-DBD, 1=ILD-DBD -->
  <parameter name="PrintEventNumber" type="int" value="0"/> <!-- 0 for not printing event number, n for printing every n events -->

  <!-- jet clustering parameters -->
  <parameter name="JetClustering.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetClustering.InputVertexCollectionName" type="string" value="BuildUpVertex" /> <!-- vertex collections to be used in JC -->
  <parameter name="JetClustering.OutputJetCollectionName" type="stringVec" value="Vertex3Jets" /> <!-- output collection name, may be multiple -->
  <parameter name="JetClustering.NJetsRequested" type="intVec" value="3" /> <!-- Multiple NJets can be specified -->
  <parameter name="JetClustering.YCut" type="doubleVec" value="0." /> <!-- specify 0 if not used -->

  <parameter name="JetClustering.JetAlgorithm" type="string" value="DurhamVertex" /> <!-- jet algorithm -->
  <parameter name="JetClustering.UseBeamJets" type="int" value="0" /> <!-- beam jet rejection -->
  <!--parameter name="JetClustering.RParameter" type="float" value="1.0" />
  <parameter name="JetClustering.BetaParameter" type="float" value="1.0" />
  <parameter name="JetClustering.GammaParameter" type="float" value="1.0" /-->

  <parameter name="JetClustering.UseMuonID" type="int" value="1" /> <!-- jet-muon ID for jet clustering -->
  <parameter name="JetClustering.MuonIDExternal" type="int" value="0" /> <!-- true to use LikelihoodPID, false for good-old simple one -->
  <parameter name="JetClustering.MuonIDMinimumD0Significance" type="double" value="5." /> <!-- min D0 significance -->
  <parameter name="JetClustering.MuonIDMinimumZ0Significance" type="double" value="5." /> <!-- min Z0 significance -->
  <parameter name="JetClustering.MuonIDMaximum3DImpactParameter" type="double" value="5." /> <!-- max 3D significance -->
  <parameter name="JetClustering.MuonIDMinimumProbability" type="double" value="0.5" /> <!-- min PID probability, only for external -->

  <parameter name="JetClustering.VertexSelectionMinimumDistance" type="double" value="0.3" /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionMaximumDistance" type="double" value="30." /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionK0MassWidth" type="double" value="0.02" /> <!-- in GeV -->
  <parameter name="JetClustering.YAddedForJetVertexVertex" type="double" value="100"/> <!-- add penalty for combining vertices -->
  <parameter name="JetClustering.YAddedForJetLeptonVertex" type="double" value="100"/> <!-- add penalty for combining lepton and vertex -->
  <parameter name="JetClustering.YAddedForJetLeptonLepton" type="double" value="100"/> <!-- add penalty for combining leptons -->

  <!-- vertex refiner parameters -->
  <parameter name="JetVertexRefiner.InputJetCollectionName" type="string" value="Vertex3Jets" />
  <parameter name="JetVertexRefiner.OutputJetCollectionName" type="string" value="Refined3Jets" />
  <parameter name="JetVertexRefiner.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetVertexRefiner.InputVertexCollectionName" type="string" value="BuildUpVertex" />
  <parameter name="JetVertexRefiner.V0VertexCollectionName" type="string" value="BuildUpVertex_V0" />
  <parameter name="JetVertexRefiner.OutputVertexCollectionName" type="string" value="RefinedVertex3Jets" />

  <parameter name="JetVertexRefiner.MinPosSingle" type="double" value="0.3" />
  <parameter name="JetVertexRefiner.MaxPosSingle" type="double" value="30." />
  <parameter name="JetVertexRefiner.MinEnergySingle" type="double" value="1." />
  <parameter name="JetVertexRefiner.MaxAngleSingle" type="double" value="0.5" />
  <parameter name="JetVertexRefiner.MaxSeparationPerPosSingle" type="double" value="0.1" />
  <parameter name="JetVertexRefiner.mind0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.minz0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.OneVertexProbThreshold" type="double" value="0.001" />
  <parameter name="JetVertexRefiner.MaxCharmFlightLengthPerJetEnergy" type="double" value="0.1" />

  <!-- FlavorTag parameters -->
  <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="FlavorTag.JetCollectionName" type="string" value="Refined3Jets" />
  <parameter name="MakeNtuple.AuxiliaryInfo" type="int" value="-1" />

  <parameter name="FlavorTag.WeightsDirectory" type="string" value="${LCFIPlusWeightsDir}"/>
  <parameter name="FlavorTag.WeightsPrefix" type="string" value="${LCFIPlusWeightsPrefix}" />
  <parameter name="FlavorTag.BookName" type="string" value="bdt" />
  <parameter name="FlavorTag.PIDAlgo" type="string" value="lcfiplus" />
  <parameter name="FlavorTag.D0ProbFileName" type="string" value="${LCFIPlusD0ProbFile}"/>
  <parameter name="FlavorTag.Z0ProbFileName" type="string" value="${LCFIPlusZ0ProbFile}"/>

  <parameter name="FlavorTag.CategoryDefinition1" type="string">nvtx==0</parameter>
  <parameter name="FlavorTag.CategoryPreselection1" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables1" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr25sigma jprobz25sigma
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2 nmuon nelectron trkmass
  </parameter>
  <parameter name="FlavorTag.CategorySpectators1" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition2" type="string">nvtx==1&&nvtxall==1</parameter>
  <parameter name="FlavorTag.CategoryPreselection2" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables2" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2
    trkmass nelectron nmuon
  </parameter>
  <parameter name="FlavorTag.CategorySpectators2" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition3" type="string">nvtx==1&&nvtxall==2</parameter>
  <parameter name="FlavorTag.CategoryPreselection3" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables3" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    1vtxprob vtxlen12all_jete vtxmassall
  </parameter>
  <parameter name="FlavorTag.CategorySpectators3" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition4" type="string">nvtx>=2</parameter>
  <parameter name="FlavorTag.CategoryPreselection4" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables4" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    vtxlen2_jete vtxsig2_jete vtxdirang2_jete vtxmom2_jete vtxmass2 vtxmult2
    vtxlen12_jete vtxsig12_jete vtxdirang12_jete vtxmom_jete vtxmass vtxmult
    1vtxprob
  </parameter>
  <parameter name="FlavorTag.CategorySpectators4" type="stringVec">
    aux nvtx
  </parameter>
</processor>

<processor name="EF3" type="ErrorFlow">
  <parameter name="InputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined3Jets </parameter>
  <parameter name="OutputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined3JetsEF </parameter>
  <parameter name="InputMCTruthLinkCollection" type="string" lcioInType="LCRelation"> RecoMCTruthLink </parameter>
</processor>

<processor name="JC4FT" type="LcfiplusProcessor">
  <!-- run primary and secondary vertex finders -->
  <parameter name="Algorithms" type="stringVec"> JetClustering JetVertexRefiner FlavorTag ReadMVA</parameter>

  <!-- general parameters -->
  <parameter name="PFOCollection" type="string" value="PFOsminusphoton" /> <!-- input PFO collection -->
  <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
  <parameter name="MCPCollection" type="string" value="" /> <!-- not used -->
  <parameter name="MCPFORelation" type="string" value="" /> <!-- not used -->
  <parameter name="ReadSubdetectorEnergies" type="int" value="1"/> <!-- true for ILD -->
  <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
  <parameter name="TrackHitOrdering" type="int" value="1"/> <!-- Track hit ordering: 0=ILD-LOI,SID-DBD, 1=ILD-DBD -->
  <parameter name="PrintEventNumber" type="int" value="0"/> <!-- 0 for not printing event number, n for printing every n events -->

  <!-- jet clustering parameters -->
  <parameter name="JetClustering.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetClustering.InputVertexCollectionName" type="string" value="BuildUpVertex" /> <!-- vertex collections to be used in JC -->
  <parameter name="JetClustering.OutputJetCollectionName" type="stringVec" value="Vertex4Jets" /> <!-- output collection name, may be multiple -->
  <parameter name="JetClustering.NJetsRequested" type="intVec" value="4" /> <!-- Multiple NJets can be specified -->
  <parameter name="JetClustering.YCut" type="doubleVec" value="0." /> <!-- specify 0 if not used -->

  <parameter name="JetClustering.JetAlgorithm" type="string" value="DurhamVertex" /> <!-- jet algorithm -->
  <parameter name="JetClustering.UseBeamJets" type="int" value="0" /> <!-- beam jet rejection -->
  <!--parameter name="JetClustering.RParameter" type="float" value="1.0" />
  <parameter name="JetClustering.BetaParameter" type="float" value="1.0" />
  <parameter name="JetClustering.GammaParameter" type="float" value="1.0" /-->

  <parameter name="JetClustering.UseMuonID" type="int" value="1" /> <!-- jet-muon ID for jet clustering -->
  <parameter name="JetClustering.MuonIDExternal" type="int" value="0" /> <!-- true to use LikelihoodPID, false for good-old simple one -->
  <parameter name="JetClustering.MuonIDMinimumD0Significance" type="double" value="5." /> <!-- min D0 significance -->
  <parameter name="JetClustering.MuonIDMinimumZ0Significance" type="double" value="5." /> <!-- min Z0 significance -->
  <parameter name="JetClustering.MuonIDMaximum3DImpactParameter" type="double" value="5." /> <!-- max 3D significance -->
  <parameter name="JetClustering.MuonIDMinimumProbability" type="double" value="0.5" /> <!-- min PID probability, only for external -->

  <parameter name="JetClustering.VertexSelectionMinimumDistance" type="double" value="0.3" /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionMaximumDistance" type="double" value="30." /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionK0MassWidth" type="double" value="0.02" /> <!-- in GeV -->
  <parameter name="JetClustering.YAddedForJetVertexVertex" type="double" value="100"/> <!-- add penalty for combining vertices -->
  <parameter name="JetClustering.YAddedForJetLeptonVertex" type="double" value="100"/> <!-- add penalty for combining lepton and vertex -->
  <parameter name="JetClustering.YAddedForJetLeptonLepton" type="double" value="100"/> <!-- add penalty for combining leptons -->

  <!-- vertex refiner parameters -->
  <parameter name="JetVertexRefiner.InputJetCollectionName" type="string" value="Vertex4Jets" />
  <parameter name="JetVertexRefiner.OutputJetCollectionName" type="string" value="Refined4Jets" />
  <parameter name="JetVertexRefiner.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetVertexRefiner.InputVertexCollectionName" type="string" value="BuildUpVertex" />
  <parameter name="JetVertexRefiner.V0VertexCollectionName" type="string" value="BuildUpVertex_V0" />
  <parameter name="JetVertexRefiner.OutputVertexCollectionName" type="string" value="RefinedVertex4Jets" />

  <parameter name="JetVertexRefiner.MinPosSingle" type="double" value="0.3" />
  <parameter name="JetVertexRefiner.MaxPosSingle" type="double" value="30." />
  <parameter name="JetVertexRefiner.MinEnergySingle" type="double" value="1." />
  <parameter name="JetVertexRefiner.MaxAngleSingle" type="double" value="0.5" />
  <parameter name="JetVertexRefiner.MaxSeparationPerPosSingle" type="double" value="0.1" />
  <parameter name="JetVertexRefiner.mind0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.minz0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.OneVertexProbThreshold" type="double" value="0.001" />
  <parameter name="JetVertexRefiner.MaxCharmFlightLengthPerJetEnergy" type="double" value="0.1" />

  <!-- FlavorTag parameters -->
  <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="FlavorTag.JetCollectionName" type="string" value="Refined4Jets" />
  <parameter name="MakeNtuple.AuxiliaryInfo" type="int" value="-1" />

  <parameter name="FlavorTag.WeightsDirectory" type="string" value="${LCFIPlusWeightsDir}"/>
  <parameter name="FlavorTag.WeightsPrefix" type="string" value="${LCFIPlusWeightsPrefix}" />
  <parameter name="FlavorTag.BookName" type="string" value="bdt" />
  <parameter name="FlavorTag.PIDAlgo" type="string" value="lcfiplus" />
  <parameter name="FlavorTag.D0ProbFileName" type="string" value="${LCFIPlusD0ProbFile}"/>
  <parameter name="FlavorTag.Z0ProbFileName" type="string" value="${LCFIPlusZ0ProbFile}"/>

  <parameter name="FlavorTag.CategoryDefinition1" type="string">nvtx==0</parameter>
  <parameter name="FlavorTag.CategoryPreselection1" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables1" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr25sigma jprobz25sigma
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2 nmuon nelectron trkmass
  </parameter>
  <parameter name="FlavorTag.CategorySpectators1" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition2" type="string">nvtx==1&&nvtxall==1</parameter>
  <parameter name="FlavorTag.CategoryPreselection2" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables2" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2
    trkmass nelectron nmuon
  </parameter>
  <parameter name="FlavorTag.CategorySpectators2" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition3" type="string">nvtx==1&&nvtxall==2</parameter>
  <parameter name="FlavorTag.CategoryPreselection3" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables3" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    1vtxprob vtxlen12all_jete vtxmassall
  </parameter>
  <parameter name="FlavorTag.CategorySpectators3" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition4" type="string">nvtx>=2</parameter>
  <parameter name="FlavorTag.CategoryPreselection4" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables4" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    vtxlen2_jete vtxsig2_jete vtxdirang2_jete vtxmom2_jete vtxmass2 vtxmult2
    vtxlen12_jete vtxsig12_jete vtxdirang12_jete vtxmom_jete vtxmass vtxmult
    1vtxprob
  </parameter>
  <parameter name="FlavorTag.CategorySpectators4" type="stringVec">
    aux nvtx
  </parameter>
</processor>

<processor name="EF4" type="ErrorFlow">
  <parameter name="InputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined4Jets </parameter>
  <parameter name="OutputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined4JetsEF </parameter>
  <parameter name="InputMCTruthLinkCollection" type="string" lcioInType="LCRelation"> RecoMCTruthLink </parameter>
</processor>

<processor name="JC5FT" type="LcfiplusProcessor">
  <!-- run primary and secondary vertex finders -->
  <parameter name="Algorithms" type="stringVec"> JetClustering JetVertexRefiner FlavorTag ReadMVA</parameter>

  <!-- general parameters -->
  <parameter name="PFOCollection" type="string" value="PFOsminusphoton" /> <!-- input PFO collection -->
  <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
  <parameter name="MCPCollection" type="string" value="" /> <!-- not used -->
  <parameter name="MCPFORelation" type="string" value="" /> <!-- not used -->
  <parameter name="ReadSubdetectorEnergies" type="int" value="1"/> <!-- true for ILD -->
  <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
  <parameter name="TrackHitOrdering" type="int" value="1"/> <!-- Track hit ordering: 0=ILD-LOI,SID-DBD, 1=ILD-DBD -->
  <parameter name="PrintEventNumber" type="int" value="0"/> <!-- 0 for not printing event number, n for printing every n events -->

  <!-- jet clustering parameters -->
  <parameter name="JetClustering.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetClustering.InputVertexCollectionName" type="string" value="BuildUpVertex" /> <!-- vertex collections to be used in JC -->
  <parameter name="JetClustering.OutputJetCollectionName" type="stringVec" value="Vertex5Jets" /> <!-- output collection name, may be multiple -->
  <parameter name="JetClustering.NJetsRequested" type="intVec" value="5" /> <!-- Multiple NJets can be specified -->
  <parameter name="JetClustering.YCut" type="doubleVec" value="0." /> <!-- specify 0 if not used -->

  <parameter name="JetClustering.JetAlgorithm" type="string" value="DurhamVertex" /> <!-- jet algorithm -->
  <parameter name="JetClustering.UseBeamJets" type="int" value="0" /> <!-- beam jet rejection -->
  <!--parameter name="JetClustering.RParameter" type="float" value="1.0" />
  <parameter name="JetClustering.BetaParameter" type="float" value="1.0" />
  <parameter name="JetClustering.GammaParameter" type="float" value="1.0" /-->

  <parameter name="JetClustering.UseMuonID" type="int" value="1" /> <!-- jet-muon ID for jet clustering -->
  <parameter name="JetClustering.MuonIDExternal" type="int" value="0" /> <!-- true to use LikelihoodPID, false for good-old simple one -->
  <parameter name="JetClustering.MuonIDMinimumD0Significance" type="double" value="5." /> <!-- min D0 significance -->
  <parameter name="JetClustering.MuonIDMinimumZ0Significance" type="double" value="5." /> <!-- min Z0 significance -->
  <parameter name="JetClustering.MuonIDMaximum3DImpactParameter" type="double" value="5." /> <!-- max 3D significance -->
  <parameter name="JetClustering.MuonIDMinimumProbability" type="double" value="0.5" /> <!-- min PID probability, only for external -->

  <parameter name="JetClustering.VertexSelectionMinimumDistance" type="double" value="0.3" /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionMaximumDistance" type="double" value="30." /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionK0MassWidth" type="double" value="0.02" /> <!-- in GeV -->
  <parameter name="JetClustering.YAddedForJetVertexVertex" type="double" value="100"/> <!-- add penalty for combining vertices -->
  <parameter name="JetClustering.YAddedForJetLeptonVertex" type="double" value="100"/> <!-- add penalty for combining lepton and vertex -->
  <parameter name="JetClustering.YAddedForJetLeptonLepton" type="double" value="100"/> <!-- add penalty for combining leptons -->

  <!-- vertex refiner parameters -->
  <parameter name="JetVertexRefiner.InputJetCollectionName" type="string" value="Vertex5Jets" />
  <parameter name="JetVertexRefiner.OutputJetCollectionName" type="string" value="Refined5Jets" />
  <parameter name="JetVertexRefiner.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetVertexRefiner.InputVertexCollectionName" type="string" value="BuildUpVertex" />
  <parameter name="JetVertexRefiner.V0VertexCollectionName" type="string" value="BuildUpVertex_V0" />
  <parameter name="JetVertexRefiner.OutputVertexCollectionName" type="string" value="RefinedVertex5Jets" />

  <parameter name="JetVertexRefiner.MinPosSingle" type="double" value="0.3" />
  <parameter name="JetVertexRefiner.MaxPosSingle" type="double" value="30." />
  <parameter name="JetVertexRefiner.MinEnergySingle" type="double" value="1." />
  <parameter name="JetVertexRefiner.MaxAngleSingle" type="double" value="0.5" />
  <parameter name="JetVertexRefiner.MaxSeparationPerPosSingle" type="double" value="0.1" />
  <parameter name="JetVertexRefiner.mind0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.minz0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.OneVertexProbThreshold" type="double" value="0.001" />
  <parameter name="JetVertexRefiner.MaxCharmFlightLengthPerJetEnergy" type="double" value="0.1" />

  <!-- FlavorTag parameters -->
  <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="FlavorTag.JetCollectionName" type="string" value="Refined5Jets" />
  <parameter name="MakeNtuple.AuxiliaryInfo" type="int" value="-1" />

  <parameter name="FlavorTag.WeightsDirectory" type="string" value="${LCFIPlusWeightsDir}"/>
  <parameter name="FlavorTag.WeightsPrefix" type="string" value="${LCFIPlusWeightsPrefix}" />
  <parameter name="FlavorTag.BookName" type="string" value="bdt" />
  <parameter name="FlavorTag.PIDAlgo" type="string" value="lcfiplus" />
  <parameter name="FlavorTag.D0ProbFileName" type="string" value="${LCFIPlusD0ProbFile}"/>
  <parameter name="FlavorTag.Z0ProbFileName" type="string" value="${LCFIPlusZ0ProbFile}"/>

  <parameter name="FlavorTag.CategoryDefinition1" type="string">nvtx==0</parameter>
  <parameter name="FlavorTag.CategoryPreselection1" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables1" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr25sigma jprobz25sigma
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2 nmuon nelectron trkmass
  </parameter>
  <parameter name="FlavorTag.CategorySpectators1" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition2" type="string">nvtx==1&&nvtxall==1</parameter>
  <parameter name="FlavorTag.CategoryPreselection2" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables2" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2
    trkmass nelectron nmuon
  </parameter>
  <parameter name="FlavorTag.CategorySpectators2" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition3" type="string">nvtx==1&&nvtxall==2</parameter>
  <parameter name="FlavorTag.CategoryPreselection3" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables3" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    1vtxprob vtxlen12all_jete vtxmassall
  </parameter>
  <parameter name="FlavorTag.CategorySpectators3" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition4" type="string">nvtx>=2</parameter>
  <parameter name="FlavorTag.CategoryPreselection4" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables4" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    vtxlen2_jete vtxsig2_jete vtxdirang2_jete vtxmom2_jete vtxmass2 vtxmult2
    vtxlen12_jete vtxsig12_jete vtxdirang12_jete vtxmom_jete vtxmass vtxmult
    1vtxprob
  </parameter>
  <parameter name="FlavorTag.CategorySpectators4" type="stringVec">
    aux nvtx
  </parameter>
</processor>

<processor name="EF5" type="ErrorFlow">
  <parameter name="InputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined5Jets </parameter>
  <parameter name="OutputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined5JetsEF </parameter>
  <parameter name="InputMCTruthLinkCollection" type="string" lcioInType="LCRelation"> RecoMCTruthLink </parameter>
</processor>

<processor name="JC6FT" type="LcfiplusProcessor">
  <!-- run primary and secondary vertex finders -->
  <parameter name="Algorithms" type="stringVec"> JetClustering JetVertexRefiner FlavorTag ReadMVA</parameter>

  <!-- general parameters -->
  <parameter name="PFOCollection" type="string" value="PFOsminusphoton" /> <!-- input PFO collection -->
  <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
  <parameter name="MCPCollection" type="string" value="" /> <!-- not used -->
  <parameter name="MCPFORelation" type="string" value="" /> <!-- not used -->
  <parameter name="ReadSubdetectorEnergies" type="int" value="1"/> <!-- true for ILD -->
  <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
  <parameter name="TrackHitOrdering" type="int" value="1"/> <!-- Track hit ordering: 0=ILD-LOI,SID-DBD, 1=ILD-DBD -->
  <parameter name="PrintEventNumber" type="int" value="0"/> <!-- 0 for not printing event number, n for printing every n events -->

  <!-- jet clustering parameters -->
  <parameter name="JetClustering.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetClustering.InputVertexCollectionName" type="string" value="BuildUpVertex" /> <!-- vertex collections to be used in JC -->
  <parameter name="JetClustering.OutputJetCollectionName" type="stringVec" value="Vertex6Jets" /> <!-- output collection name, may be multiple -->
  <parameter name="JetClustering.NJetsRequested" type="intVec" value="6" /> <!-- Multiple NJets can be specified -->
  <parameter name="JetClustering.YCut" type="doubleVec" value="0." /> <!-- specify 0 if not used -->

  <parameter name="JetClustering.JetAlgorithm" type="string" value="DurhamVertex" /> <!-- jet algorithm -->
  <parameter name="JetClustering.UseBeamJets" type="int" value="0" /> <!-- beam jet rejection -->
  <!--parameter name="JetClustering.RParameter" type="float" value="1.0" />
  <parameter name="JetClustering.BetaParameter" type="float" value="1.0" />
  <parameter name="JetClustering.GammaParameter" type="float" value="1.0" /-->

  <parameter name="JetClustering.UseMuonID" type="int" value="1" /> <!-- jet-muon ID for jet clustering -->
  <parameter name="JetClustering.MuonIDExternal" type="int" value="0" /> <!-- true to use LikelihoodPID, false for good-old simple one -->
  <parameter name="JetClustering.MuonIDMinimumD0Significance" type="double" value="5." /> <!-- min D0 significance -->
  <parameter name="JetClustering.MuonIDMinimumZ0Significance" type="double" value="5." /> <!-- min Z0 significance -->
  <parameter name="JetClustering.MuonIDMaximum3DImpactParameter" type="double" value="5." /> <!-- max 3D significance -->
  <parameter name="JetClustering.MuonIDMinimumProbability" type="double" value="0.5" /> <!-- min PID probability, only for external -->

  <parameter name="JetClustering.VertexSelectionMinimumDistance" type="double" value="0.3" /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionMaximumDistance" type="double" value="30." /> <!-- in mm -->
  <parameter name="JetClustering.VertexSelectionK0MassWidth" type="double" value="0.02" /> <!-- in GeV -->
  <parameter name="JetClustering.YAddedForJetVertexVertex" type="double" value="100"/> <!-- add penalty for combining vertices -->
  <parameter name="JetClustering.YAddedForJetLeptonVertex" type="double" value="100"/> <!-- add penalty for combining lepton and vertex -->
  <parameter name="JetClustering.YAddedForJetLeptonLepton" type="double" value="100"/> <!-- add penalty for combining leptons -->

  <!-- vertex refiner parameters -->
  <parameter name="JetVertexRefiner.InputJetCollectionName" type="string" value="Vertex6Jets" />
  <parameter name="JetVertexRefiner.OutputJetCollectionName" type="string" value="Refined6Jets" />
  <parameter name="JetVertexRefiner.PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="JetVertexRefiner.InputVertexCollectionName" type="string" value="BuildUpVertex" />
  <parameter name="JetVertexRefiner.V0VertexCollectionName" type="string" value="BuildUpVertex_V0" />
  <parameter name="JetVertexRefiner.OutputVertexCollectionName" type="string" value="RefinedVertex6Jets" />

  <parameter name="JetVertexRefiner.MinPosSingle" type="double" value="0.3" />
  <parameter name="JetVertexRefiner.MaxPosSingle" type="double" value="30." />
  <parameter name="JetVertexRefiner.MinEnergySingle" type="double" value="1." />
  <parameter name="JetVertexRefiner.MaxAngleSingle" type="double" value="0.5" />
  <parameter name="JetVertexRefiner.MaxSeparationPerPosSingle" type="double" value="0.1" />
  <parameter name="JetVertexRefiner.mind0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.minz0sigSingle" type="double" value="5." />
  <parameter name="JetVertexRefiner.OneVertexProbThreshold" type="double" value="0.001" />
  <parameter name="JetVertexRefiner.MaxCharmFlightLengthPerJetEnergy" type="double" value="0.1" />

  <!-- FlavorTag parameters -->
  <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
  <parameter name="FlavorTag.JetCollectionName" type="string" value="Refined6Jets" />
  <parameter name="MakeNtuple.AuxiliaryInfo" type="int" value="-1" />

  <parameter name="FlavorTag.WeightsDirectory" type="string" value="${LCFIPlusWeightsDir}"/>
  <parameter name="FlavorTag.WeightsPrefix" type="string" value="${LCFIPlusWeightsPrefix}"/>
  <parameter name="FlavorTag.BookName" type="string" value="bdt" />
  <parameter name="FlavorTag.PIDAlgo" type="string" value="lcfiplus" />
  <parameter name="FlavorTag.D0ProbFileName" type="string" value="${LCFIPlusD0ProbFile}"/>
  <parameter name="FlavorTag.Z0ProbFileName" type="string" value="${LCFIPlusZ0ProbFile}"/>

  <parameter name="FlavorTag.CategoryDefinition1" type="string">nvtx==0</parameter>
  <parameter name="FlavorTag.CategoryPreselection1" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables1" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr25sigma jprobz25sigma
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2 nmuon nelectron trkmass
  </parameter>
  <parameter name="FlavorTag.CategorySpectators1" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition2" type="string">nvtx==1&&nvtxall==1</parameter>
  <parameter name="FlavorTag.CategoryPreselection2" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables2" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    d0bprob2 d0cprob2 d0qprob2 z0bprob2 z0cprob2 z0qprob2
    trkmass nelectron nmuon
  </parameter>
  <parameter name="FlavorTag.CategorySpectators2" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition3" type="string">nvtx==1&&nvtxall==2</parameter>
  <parameter name="FlavorTag.CategoryPreselection3" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables3" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    1vtxprob vtxlen12all_jete vtxmassall
  </parameter>
  <parameter name="FlavorTag.CategorySpectators3" type="stringVec">
    aux nvtx
  </parameter>

  <parameter name="FlavorTag.CategoryDefinition4" type="string">nvtx>=2</parameter>
  <parameter name="FlavorTag.CategoryPreselection4" type="string">trk1d0sig!=0</parameter>
  <parameter name="FlavorTag.CategoryVariables4" type="stringVec">
    trk1d0sig trk2d0sig trk1z0sig trk2z0sig trk1pt_jete trk2pt_jete jprobr2 jprobz2
    vtxlen1_jete vtxsig1_jete vtxdirang1_jete vtxmom1_jete vtxmass1 vtxmult1 vtxmasspc vtxprob
    vtxlen2_jete vtxsig2_jete vtxdirang2_jete vtxmom2_jete vtxmass2 vtxmult2
    vtxlen12_jete vtxsig12_jete vtxdirang12_jete vtxmom_jete vtxmass vtxmult
    1vtxprob
  </parameter>
  <parameter name="FlavorTag.CategorySpectators4" type="stringVec">
    aux nvtx
  </parameter>
</processor>

<processor name="EF6" type="ErrorFlow">
  <parameter name="InputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined6Jets </parameter>
  <parameter name="OutputPFOCollection" type="string" lcioInType="ReconstructedParticle"> Refined6JetsEF </parameter>
  <parameter name="InputMCTruthLinkCollection" type="string" lcioInType="LCRelation"> RecoMCTruthLink </parameter>
</processor>


<processor name="ComputeCorrectAngulardEdX" type="AngularCorrection_dEdxProcessor">
  <!-- description not set by author -->
  <!--parameter for new angular correction dedx= uncorrected_dedx  / f, with f= pol3(lambda)-->
  <!-- Parameters for 2020 DST (and all generated with v02-02 and v02-02-01 -->
  <parameter name="AngularCorrectionParameters" type="FloatVec"> 0.970205 0.0007506 4.41781e-8 5.8222e-8 </parameter>
  <!--LDC track collection name-->
  <parameter name="LDCTrackCollection" type="string" lcioInType="Track">MarlinTrkTracks </parameter>
  <!--parameters used in the outdated angular correction outdated_dedx= uncorrected_dedx / f, with f = 1. / ( 1.0+[1]*cos(theta)*cos(theta)/[0] )-->
</processor>

<!-- Post reconstruction related : PID, Vertexing, Particle finding, cluster topology -->
<processor name="LikelihoodPID" type="LikelihoodPIDProcessor">
  <!--Performs particle identification-->
  <!--Debugging?-->
  <parameter name="Debug" type="int">0</parameter>
  <!--Boundaries for energy binning-->
  <parameter name="EnergyBoundaries" type="FloatVec">0 1.0e+07</parameter>
  <!--Name of files containing pdfs for charged particles-->
  <parameter name="FilePDFName" type="StringVec"> ${ProductionDir}/HighLevelReco/PIDFiles/LikelihoodPID_Standard_l5_v01.root </parameter>
  <!--Whether MVA low momentum mu/pi is used or not-->
  <parameter name="UseLowMomentumMuPiSeparation" type="bool">true</parameter>
  <!--The BDTG weights files for low momentum mu/pi separation-->
  <parameter name="FileWeightFormupiSeparationName" type="StringVec">${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_02GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_03GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_04GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_05GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_06GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_07GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_08GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_09GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_10GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_11GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_12GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_13GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_14GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_15GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_16GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_17GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_18GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_19GeVP_clusterinfo.weights.xml ${ProductionDir}/HighLevelReco/PIDFiles/LowMomMuPiSeparation/TMVAClassification_BDTG_l5_20GeVP_clusterinfo.weights.xml </parameter>
  <!--dE/dx parameters for each particle-->
  <!-- Parameters for 2020 DST (and all generated with v02-02 and v02-02-01 -->
  <parameter name="dEdxParameter_electron" type="FloatVec"> -0.00232937 -3.88424e+13 -37881.1 -1.56837 0 </parameter>
  <parameter name="dEdxParameter_muon" type="FloatVec"> 0.0717375 -16596.5 -4.84028e+07 0.356728 0.000371431 </parameter>
  <parameter name="dEdxParameter_pion" type="FloatVec"> 0.0733683 51678.4 8.19644e+07 0.453505 0.000404984 </parameter>
  <parameter name="dEdxParameter_kaon" type="FloatVec"> 0.0792784 3798.12 4.06952e+07 0.450671 0.00050169 </parameter>
  <parameter name="dEdxParameter_proton" type="FloatVec"> 0.0770318 1053.24 4.95076e+06 0.281489 0.000168616 </parameter>
  <!--dE/dx normalization-->
  <parameter name="dEdxNormalization" type="float">1.350e-7</parameter>
  <!--dE/dx error factor(7.55 for l5, 8.53 for s5)-->
  <parameter name="dEdxErrorFactor" type="float">7.55</parameter>
  <!-- Method: Maximum Likelihood(0), Bayesian(1), or risk based Bayesian(2)-->
  <parameter name="UseBayesian" type="int">2</parameter>
  <!-- Cost Matrix for risk based Bayesian(2)-->
  <parameter name="CostMatrix" type="FloatVec">1.0e-50 1.0 1.5 1.0 1.5 1.0 1.0e-50 3.0 1.0 1.0 1.0 1.0 1.0e-50 1.0 3.0 1.0 1.0 4.0 1.0e-50 2.0 1.0 1.0 5.0 1.0 1.0e-50</parameter>
  <!--Version to be added to the name of the calculated methods-->
  <parameter name="PIDMethodsToRun_version" type="string"> v2 </parameter>
  <!--Name of the PFO collection-->
  <parameter name="RecoParticleCollection" type="string"> PandoraPFOs </parameter>
</processor>

<processor name="LeptonID" type="LeptonIDProcessor">
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string"> MESSAGE </parameter>
  <parameter name="BuildTree" type="bool">false</parameter>
  <parameter name="EvalMVA" type="bool">true</parameter>
  <parameter name="weightfile">HighLevelReco/PIDFiles/CPID/LeptonID_multi_jet_dEdx_800t_3d_cm50r50_BDTG.weights.xml</parameter>
</processor>

<processor name="ComprehensivePID" type="ComprehensivePIDProcessor">

  <parameter name="Verbosity" type="string"> DEBUG </parameter>
  <parameter name="PFOCollection" type="string" value="PandoraPFOs"/>
  <parameter name="RecoMCTruthLink" type="string" value="RecoMCTruthLink"/>

  <parameter name="modeExtract" type="bool" value="true" />
  <parameter name="modeTrain"   type="bool" value="false"/>
  <parameter name="modeInfer"   type="bool" value="true"/>

  <parameter name="TTreeFileName" type="string" value=""/>
  <parameter name="reffile" type="string" value="HighLevelReco/PIDFiles/CPID/Ref_2fZhad_18bins_conservative.txt"/>
  <parameter name="signalPDGs" type="FloatVec"  value="11 13 211 321 2212"/>
  <parameter name="backgroundPDGs" type="FloatVec"  value=""/>
  
  <parameter name="plotFolder" type="string" value="CPID_Plots"/>
  <parameter name="fileFormat" type="string" value=".png"/>

  <parameter name="momMin" type="float" value="1"/>
  <parameter name="momMax" type="float" value="100"/>
  <parameter name="momLog" type="bool" value="true"/>
  <parameter name="momNBins" type="float" value="12"/>

  <parameter name="cutD0" type="float" value="0"/>
  <parameter name="cutZ0" type="float" value="0"/>
  <parameter name="cutLamMin" type="float" value="0"/>
  <parameter name="cutLamMax" type="float" value="0"/>
  <parameter name="cutNTracksMin" type="int" value="1"/>
  <parameter name="cutNTracksMax" type="int" value="-1"/>
  
  <parameter name="inputAlgoSpecs" type="StringVec">
    dEdx_RCD:dEdx_RCD
    TOF:TOF100
    Pandora
    LeptonID
  </parameter>

  <parameter name="TOF100.S" type="StringVec" value="TOFEstimators100ps"/>
  
  <parameter name="dEdx_RCD.F" type="FloatVec">
    -1.28883368e-02   2.72959919e+01   1.10560871e+01 -1.74534200e+00  -9.84887586e-07
      6.49143971e-02   1.55775592e+03   9.31848047e+08  2.32201725e-01   2.50492066e-04
      6.54955215e-02   8.26239081e+04   1.92933904e+07  2.52743206e-01   2.26657525e-04
      7.52235689e-02   1.59710415e+04   1.79625604e+06  3.15315795e-01   2.30414997e-04
      7.92251260e-02   6.38129720e+04   3.82995071e+04  2.80793601e-01   7.14371743e-04
      1
  </parameter>

  <parameter name="trainModelSpecs" type="StringVec">
    TMVA_BDT_MC:TMVA_BDT_MC_12bins_singleP
  </parameter>
  <parameter name="trainingObservables" type="StringVec"> </parameter>

  <parameter name="TMVA_BDT_MC_12bins_singleP.S" type="StringVec">
    !V:!Silent:Color:DrawProgressBar:Transformations=I;D;P;G,D:AnalysisType=multiclass
    SplitMode=Random:NormMode=NumEvents:!V
    !V:!H:NTrees=1000:BoostType=Grad:Shrinkage=0.10:UseBaggedBoost:BaggedSampleFraction=0.50:nCuts=30:MaxDepth=5
    dEdx_RCD_piDis>-900&&dEdx_RCD_kaDis>-900
  </parameter>
</processor>

<processor name="WWCategorisation" type="WWCategorisationProcessor">
  <parameter name="IsolatedElectrons" type="string" lcioInType="ReconstructedParticle"> IsolatedElectrons </parameter>
  <parameter name="IsolatedMuons" type="string" lcioInType="ReconstructedParticle"> IsolatedMuons </parameter>
  <parameter name="IsolatedTaus" type="string" lcioInType="ReconstructedParticle"> IsolatedTaus </parameter>
  <parameter name="IsolatedPhotons" type="string" lcioInType="ReconstructedParticle"> IsolatedPhotons </parameter>
  <parameter name="PFOsminusphoton" type="string" lcioInType="ReconstructedParticle"> PFOsminusphoton </parameter>
  <parameter name="TTreeFileName" type="string"> /nfs/dust/ilc/user/ueinhaus/work/WWCKM/FT4q/WWCat_TTreeFile_FT4q_bbbb_0.root </parameter>
  <parameter name="ConfusionMatrixFileName" type="string"> /nfs/dust/ilc/user/ueinhaus/work/WWCKM/FT4q/WWCat_ConfusionMatrix_FT4q_bbbb_0.png </parameter>
</processor>

<processor name="ParticleIDFilter" type="ReconstructedParticleParticleIDFilterProcessor">
    <parameter name="RecoParticleCollection" type="string" value="PandoraPFOs"/>
    <parameter name="FilterPIDAlgos" type="StringVev" value="BasicVariablePID LikelihoodPID LowMomMuID ShowerShapesPID dEdxPID"/>
    <parameter name="Verbosity" type="string" value="DEBUG"/>
</processor>


<processor name="StoreVariablesForDeepMLFlavorTagger_2J" type="StoreVariablesForDeepMLFlavorTagger">
  <parameter name="CollectionPrimaryVertex" type="string" value="PrimaryVertex" />
  <parameter name="CollectionRefinedJets" type="string" value="Refined2Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex2Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="D0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/d0probv2_ildl5_6q500.root"/> <!-- vtxprob/d0probv2_ildl5_6q500.root -->
  <parameter name="Z0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/z0probv2_ildl5_6q500.root"/>
  <parameter name="dEdxPID" type="string" value="dEdxPIDv2"/>
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet </parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet Charge IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton 
  RapidityRelJet PhiRelJet Rapidity D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig D0bprob D0cprob D0qprob Z0bprob Z0cprob Z0qprob
  UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac CPID11ness CPID13ness CPID211ness CPID321ness CPID2212ness
  JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis </parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks 
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig 
  SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis SecondaryVertexCosMomPos SecondaryVertexEnergyJetEnergy
  SecondaryVertexEnergy SecondaryVertexRapidity JetRapidity </parameter> 
<!--  <parameter name="DeepJetFeatures_Jets" type="StringVec"> JetPt JetMomentum NCharged NNeutral NSecondaryVertices </parameter>
  <parameter name="DeepJetFeatures_Charged" type="StringVec"> ChargedTrackMomentumFrac ChargedTrackPtRelJet ChargedTrackJetDotProductNorm ChargedDeltaRJetTrackRapidity IsElectron
    IsMuon ChargedD0Sig ChargedD0 ChargedZ0 ChargedZ0Sig Charged3DImpactPar Charged3DImpactParSig ChargedChi2NDF ChargedTrackUsedinPrimVertex LeptonMomRelJet LeptonPtRelJet LeptonMomFraction 
    Kaoness WeightedKaonnessMomFrac </parameter>
  <parameter name="DeepJetFeatures_Neutral" type="StringVec"> NeutralMomentumConstituent NeutralDeltaRJet NeutralHCalFrac NeutralMomentumFrac IsPhoton </parameter>
  <parameter name="DeepJetFeatures_SV" type="StringVec"> SecondaryVertexMass SecondaryVertexNTracks SecondaryVertexChi2 SecondaryVertexNDF SecondaryVertexEnergy SecondaryVertexDeltaRJetAxis
    SecondaryVertexEnergyJetEnergy SecondaryVertexCosMomPos SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig </parameter>-->
</processor>
 
<processor name="ParticleNetTagger_2J" type="ParticleNetTaggerProcessor">
  <!--ParticleNetTaggerProcessor offers Jet tagging using a Deep-Learning model-->
  <!--Torch script file describing the model-->
  <parameter name="ModelScriptFile" type="string"> models/particlenet.pt </parameter>
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/particlenet_test.pt </parameter>-->
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/example_module.pt </parameter> -->
  <!--File containing the parameters for pre-processing-->
  <parameter name="PreprocessingParamsFile" type="string"> dl_jet_tagger_pre_proc_params.txt </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  <parameter name="CollectionRefinedJets" type="string" value="Refined2Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex2Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet</parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> RapidityRelJet Rapidity PhiRelJet TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig Charge
  IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton D0bprob D0cprob D0qprob Z0bprob 
  Z0cprob Z0qprob UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac
  JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis</parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexRapidity SecondaryVertexPhiJetAxis SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig SecondaryVertexCosMomPos
  SecondaryVertexEnergyJetEnergy SecondaryVertexEnergy </parameter>
  <parameter name="MeanPFFeatures" type="FloatVec"> -7.29761758e-05 -4.90586780e-04  2.13698741e-03 -4.85899334e-02
    1.55332571e-01 -1.70381662e+00 -1.72863238e+00  3.98157854e-01
   -5.64316368e+00 -4.33297919e+00 -5.58491714e+00 -5.54083471e+00
   -1.23558220e+00  3.77338024e+01  3.53744694e-03  3.61168603e-02
    5.44658670e-03  3.99160210e-01  1.24098596e-01  4.35177747e-01
   -5.53569693e+00 -5.56372828e+00 -5.55553654e+00 -5.43602715e+00
   -5.51979248e+00 -5.52802548e+00 -5.31413136e+00 -3.92395558e+00
   -5.41138463e+00 -5.08574942e+00 -5.56832463e+00 -5.58195263e+00
   -3.66299027e+00 -4.36298817e+00</parameter>
   <parameter name="MeanSVFeatures" type="FloatVec"> 9.50258040e-04 5.84343269e-03 8.82074831e-05 1.02138306e+00
    1.12825104e+00 2.80497551e+00 1.33534754e+01 4.48843851e+00
    7.80911041e+11 8.06027962e+00 1.21880239e+12 9.78663636e-01
    2.65825129e-01 2.09486003e+01 </parameter>
    <parameter name="StdPFFeatures" type="FloatVec"> 4.63464098e-01 1.14537800e+00 5.08248809e-01 5.93276019e-01
     5.56418085e-01 5.92653891e-01 5.72287883e-01 4.21164822e-01
     2.12213643e+01 6.67180698e+02 2.35735079e+01 7.18364247e+02
     3.18062710e+01 7.90407970e+02 6.63860786e-01 1.86580901e-01
     7.35997377e-02 4.89725777e-01 3.29694002e-01 4.95780269e-01
     5.03142623e+00 4.99806323e+00 5.00808600e+00 5.14448399e+00
     5.04771499e+00 5.03882330e+00 5.28831488e+00 8.16289406e+00
     5.17188338e+00 5.59991318e+00 4.99269040e+00 4.97699012e+00
     8.59563093e+00 5.01705123e+00 </parameter>
    <parameter name="StdSVFeatures" type="FloatVec"> 1.74785539e-01 8.62445944e-01 1.94874110e-01 4.00349924e-01
     8.71161959e-01 1.39115375e+00 4.40525001e+02 1.17934104e+01
     4.54040549e+14 2.04232077e+03 7.11264431e+14 1.10007142e-01
     1.75591528e-01 1.85614393e+01 </parameter>
</processor>

<processor name="ParticleIDFilter_2J" type="ReconstructedParticleParticleIDFilterProcessor">
    <parameter name="RecoParticleCollection" type="string" value="PandoraPFOs"/>
    <parameter name="FilterPIDAlgos" type="StringVev" value="mlflavortagging_deepjet_charged mlflavortagging_deepjet_jets mlflavortagging_deepjet_neutral mlflavortagging_deepjet_sv mlflavortagging_pf_features mlflavortagging_pf_points mlflavortagging_sv_features mlflavortagging_sv_points"/>
    <parameter name="Verbosity" type="string" value="DEBUG"/>
</processor>

<processor name="StoreVariablesForDeepMLFlavorTagger_3J" type="StoreVariablesForDeepMLFlavorTagger">
  <parameter name="CollectionPrimaryVertex" type="string" value="PrimaryVertex" />
  <parameter name="CollectionRefinedJets" type="string" value="Refined3Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex3Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="D0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/d0probv2_ildl5_6q500.root"/> <!-- vtxprob/d0probv2_ildl5_6q500.root -->
  <parameter name="Z0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/z0probv2_ildl5_6q500.root"/>
  <parameter name="dEdxPID" type="string" value="dEdxPIDv2"/>
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet </parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet Charge IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton 
  RapidityRelJet PhiRelJet Rapidity D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig D0bprob D0cprob D0qprob Z0bprob Z0cprob Z0qprob
  UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis </parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks 
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig 
  SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis SecondaryVertexCosMomPos SecondaryVertexEnergyJetEnergy
  SecondaryVertexEnergy SecondaryVertexRapidity JetRapidity </parameter> 
  <parameter name="DeepJetFeatures_Jets" type="StringVec"> JetPt JetMomentum NCharged NNeutral NSecondaryVertices </parameter>
  <parameter name="DeepJetFeatures_Charged" type="StringVec"> ChargedTrackMomentumFrac ChargedTrackPtRelJet ChargedTrackJetDotProductNorm ChargedDeltaRJetTrackRapidity IsElectron
    IsMuon ChargedD0Sig ChargedD0 ChargedZ0 ChargedZ0Sig Charged3DImpactPar Charged3DImpactParSig ChargedChi2NDF ChargedTrackUsedinPrimVertex LeptonMomRelJet LeptonPtRelJet LeptonMomFraction 
    Kaoness WeightedKaonnessMomFrac </parameter>
  <parameter name="DeepJetFeatures_Neutral" type="StringVec"> NeutralMomentumConstituent NeutralDeltaRJet NeutralHCalFrac NeutralMomentumFrac IsPhoton </parameter>
  <parameter name="DeepJetFeatures_SV" type="StringVec"> SecondaryVertexMass SecondaryVertexNTracks SecondaryVertexChi2 SecondaryVertexNDF SecondaryVertexEnergy SecondaryVertexDeltaRJetAxis
    SecondaryVertexEnergyJetEnergy SecondaryVertexCosMomPos SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig </parameter>
</processor>
 
<processor name="ParticleNetTagger_3J" type="ParticleNetTaggerProcessor">
  <!--ParticleNetTaggerProcessor offers Jet tagging using a Deep-Learning model-->
  <!--Torch script file describing the model-->
  <parameter name="ModelScriptFile" type="string"> models/particlenet.pt </parameter>
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/particlenet_test.pt </parameter>-->
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/example_module.pt </parameter> -->
  <!--File containing the parameters for pre-processing-->
  <parameter name="PreprocessingParamsFile" type="string"> dl_jet_tagger_pre_proc_params.txt </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  <parameter name="CollectionRefinedJets" type="string" value="Refined3Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex3Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet</parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> RapidityRelJet Rapidity PhiRelJet TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig Charge
  IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton D0bprob D0cprob D0qprob Z0bprob 
  Z0cprob Z0qprob UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac
  JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis</parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexRapidity SecondaryVertexPhiJetAxis SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig SecondaryVertexCosMomPos
  SecondaryVertexEnergyJetEnergy SecondaryVertexEnergy </parameter>
  <parameter name="MeanPFFeatures" type="FloatVec"> -7.29761758e-05 -4.90586780e-04  2.13698741e-03 -4.85899334e-02
    1.55332571e-01 -1.70381662e+00 -1.72863238e+00  3.98157854e-01
   -5.64316368e+00 -4.33297919e+00 -5.58491714e+00 -5.54083471e+00
   -1.23558220e+00  3.77338024e+01  3.53744694e-03  3.61168603e-02
    5.44658670e-03  3.99160210e-01  1.24098596e-01  4.35177747e-01
   -5.53569693e+00 -5.56372828e+00 -5.55553654e+00 -5.43602715e+00
   -5.51979248e+00 -5.52802548e+00 -5.31413136e+00 -3.92395558e+00
   -5.41138463e+00 -5.08574942e+00 -5.56832463e+00 -5.58195263e+00
   -3.66299027e+00 -4.36298817e+00</parameter>
   <parameter name="MeanSVFeatures" type="FloatVec"> 9.50258040e-04 5.84343269e-03 8.82074831e-05 1.02138306e+00
    1.12825104e+00 2.80497551e+00 1.33534754e+01 4.48843851e+00
    7.80911041e+11 8.06027962e+00 1.21880239e+12 9.78663636e-01
    2.65825129e-01 2.09486003e+01 </parameter>
    <parameter name="StdPFFeatures" type="FloatVec"> 4.63464098e-01 1.14537800e+00 5.08248809e-01 5.93276019e-01
     5.56418085e-01 5.92653891e-01 5.72287883e-01 4.21164822e-01
     2.12213643e+01 6.67180698e+02 2.35735079e+01 7.18364247e+02
     3.18062710e+01 7.90407970e+02 6.63860786e-01 1.86580901e-01
     7.35997377e-02 4.89725777e-01 3.29694002e-01 4.95780269e-01
     5.03142623e+00 4.99806323e+00 5.00808600e+00 5.14448399e+00
     5.04771499e+00 5.03882330e+00 5.28831488e+00 8.16289406e+00
     5.17188338e+00 5.59991318e+00 4.99269040e+00 4.97699012e+00
     8.59563093e+00 5.01705123e+00 </parameter>
    <parameter name="StdSVFeatures" type="FloatVec"> 1.74785539e-01 8.62445944e-01 1.94874110e-01 4.00349924e-01
     8.71161959e-01 1.39115375e+00 4.40525001e+02 1.17934104e+01
     4.54040549e+14 2.04232077e+03 7.11264431e+14 1.10007142e-01
     1.75591528e-01 1.85614393e+01 </parameter>
</processor>

<processor name="ParticleIDFilter_3J" type="ReconstructedParticleParticleIDFilterProcessor">
    <parameter name="RecoParticleCollection" type="string" value="PandoraPFOs"/>
    <parameter name="FilterPIDAlgos" type="StringVev" value="mlflavortagging_deepjet_charged mlflavortagging_deepjet_jets mlflavortagging_deepjet_neutral mlflavortagging_deepjet_sv mlflavortagging_pf_features mlflavortagging_pf_points mlflavortagging_sv_features mlflavortagging_sv_points"/>
    <parameter name="Verbosity" type="string" value="DEBUG"/>
</processor>

<processor name="StoreVariablesForDeepMLFlavorTagger_4J" type="StoreVariablesForDeepMLFlavorTagger">
  <parameter name="CollectionPrimaryVertex" type="string" value="PrimaryVertex" />
  <parameter name="CollectionRefinedJets" type="string" value="Refined4Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex4Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="D0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/d0probv2_ildl5_6q500.root"/> <!-- vtxprob/d0probv2_ildl5_6q500.root -->
  <parameter name="Z0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/z0probv2_ildl5_6q500.root"/>
  <parameter name="dEdxPID" type="string" value="dEdxPIDv2"/>
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet </parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet Charge IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton 
  RapidityRelJet PhiRelJet Rapidity D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig D0bprob D0cprob D0qprob Z0bprob Z0cprob Z0qprob
  UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis </parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks 
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig 
  SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis SecondaryVertexCosMomPos SecondaryVertexEnergyJetEnergy
  SecondaryVertexEnergy SecondaryVertexRapidity JetRapidity </parameter> 
  <parameter name="DeepJetFeatures_Jets" type="StringVec"> JetPt JetMomentum NCharged NNeutral NSecondaryVertices </parameter>
  <parameter name="DeepJetFeatures_Charged" type="StringVec"> ChargedTrackMomentumFrac ChargedTrackPtRelJet ChargedTrackJetDotProductNorm ChargedDeltaRJetTrackRapidity IsElectron
    IsMuon ChargedD0Sig ChargedD0 ChargedZ0 ChargedZ0Sig Charged3DImpactPar Charged3DImpactParSig ChargedChi2NDF ChargedTrackUsedinPrimVertex LeptonMomRelJet LeptonPtRelJet LeptonMomFraction 
    Kaoness WeightedKaonnessMomFrac </parameter>
  <parameter name="DeepJetFeatures_Neutral" type="StringVec"> NeutralMomentumConstituent NeutralDeltaRJet NeutralHCalFrac NeutralMomentumFrac IsPhoton </parameter>
  <parameter name="DeepJetFeatures_SV" type="StringVec"> SecondaryVertexMass SecondaryVertexNTracks SecondaryVertexChi2 SecondaryVertexNDF SecondaryVertexEnergy SecondaryVertexDeltaRJetAxis
    SecondaryVertexEnergyJetEnergy SecondaryVertexCosMomPos SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig </parameter>
</processor>
 
<processor name="ParticleNetTagger_4J" type="ParticleNetTaggerProcessor">
  <!--ParticleNetTaggerProcessor offers Jet tagging using a Deep-Learning model-->
  <!--Torch script file describing the model-->
  <parameter name="ModelScriptFile" type="string"> models/particlenet.pt </parameter>
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/particlenet_test.pt </parameter>-->
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/example_module.pt </parameter> -->
  <!--File containing the parameters for pre-processing-->
  <parameter name="PreprocessingParamsFile" type="string"> dl_jet_tagger_pre_proc_params.txt </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  <parameter name="CollectionRefinedJets" type="string" value="Refined4Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex4Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet</parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> RapidityRelJet Rapidity PhiRelJet TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig Charge
  IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton D0bprob D0cprob D0qprob Z0bprob 
  Z0cprob Z0qprob UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac
  JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis</parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexRapidity SecondaryVertexPhiJetAxis SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig SecondaryVertexCosMomPos
  SecondaryVertexEnergyJetEnergy SecondaryVertexEnergy </parameter>
  <parameter name="MeanPFFeatures" type="FloatVec"> -7.29761758e-05 -4.90586780e-04  2.13698741e-03 -4.85899334e-02
    1.55332571e-01 -1.70381662e+00 -1.72863238e+00  3.98157854e-01
   -5.64316368e+00 -4.33297919e+00 -5.58491714e+00 -5.54083471e+00
   -1.23558220e+00  3.77338024e+01  3.53744694e-03  3.61168603e-02
    5.44658670e-03  3.99160210e-01  1.24098596e-01  4.35177747e-01
   -5.53569693e+00 -5.56372828e+00 -5.55553654e+00 -5.43602715e+00
   -5.51979248e+00 -5.52802548e+00 -5.31413136e+00 -3.92395558e+00
   -5.41138463e+00 -5.08574942e+00 -5.56832463e+00 -5.58195263e+00
   -3.66299027e+00 -4.36298817e+00</parameter>
   <parameter name="MeanSVFeatures" type="FloatVec"> 9.50258040e-04 5.84343269e-03 8.82074831e-05 1.02138306e+00
    1.12825104e+00 2.80497551e+00 1.33534754e+01 4.48843851e+00
    7.80911041e+11 8.06027962e+00 1.21880239e+12 9.78663636e-01
    2.65825129e-01 2.09486003e+01 </parameter>
    <parameter name="StdPFFeatures" type="FloatVec"> 4.63464098e-01 1.14537800e+00 5.08248809e-01 5.93276019e-01
     5.56418085e-01 5.92653891e-01 5.72287883e-01 4.21164822e-01
     2.12213643e+01 6.67180698e+02 2.35735079e+01 7.18364247e+02
     3.18062710e+01 7.90407970e+02 6.63860786e-01 1.86580901e-01
     7.35997377e-02 4.89725777e-01 3.29694002e-01 4.95780269e-01
     5.03142623e+00 4.99806323e+00 5.00808600e+00 5.14448399e+00
     5.04771499e+00 5.03882330e+00 5.28831488e+00 8.16289406e+00
     5.17188338e+00 5.59991318e+00 4.99269040e+00 4.97699012e+00
     8.59563093e+00 5.01705123e+00 </parameter>
    <parameter name="StdSVFeatures" type="FloatVec"> 1.74785539e-01 8.62445944e-01 1.94874110e-01 4.00349924e-01
     8.71161959e-01 1.39115375e+00 4.40525001e+02 1.17934104e+01
     4.54040549e+14 2.04232077e+03 7.11264431e+14 1.10007142e-01
     1.75591528e-01 1.85614393e+01 </parameter>
</processor>

<processor name="ParticleIDFilter_4J" type="ReconstructedParticleParticleIDFilterProcessor">
    <parameter name="RecoParticleCollection" type="string" value="PandoraPFOs"/>
    <parameter name="FilterPIDAlgos" type="StringVev" value="mlflavortagging_deepjet_charged mlflavortagging_deepjet_jets mlflavortagging_deepjet_neutral mlflavortagging_deepjet_sv mlflavortagging_pf_features mlflavortagging_pf_points mlflavortagging_sv_features mlflavortagging_sv_points"/>
    <parameter name="Verbosity" type="string" value="DEBUG"/>
</processor>

<processor name="StoreVariablesForDeepMLFlavorTagger_5J" type="StoreVariablesForDeepMLFlavorTagger">
  <parameter name="CollectionPrimaryVertex" type="string" value="PrimaryVertex" />
  <parameter name="CollectionRefinedJets" type="string" value="Refined5Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex5Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="D0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/d0probv2_ildl5_6q500.root"/> <!-- vtxprob/d0probv2_ildl5_6q500.root -->
  <parameter name="Z0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/z0probv2_ildl5_6q500.root"/>
  <parameter name="dEdxPID" type="string" value="dEdxPIDv2"/>
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet </parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet Charge IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton 
  RapidityRelJet PhiRelJet Rapidity D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig D0bprob D0cprob D0qprob Z0bprob Z0cprob Z0qprob
  UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis </parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks 
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig 
  SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis SecondaryVertexCosMomPos SecondaryVertexEnergyJetEnergy
  SecondaryVertexEnergy SecondaryVertexRapidity JetRapidity </parameter> 
  <parameter name="DeepJetFeatures_Jets" type="StringVec"> JetPt JetMomentum NCharged NNeutral NSecondaryVertices </parameter>
  <parameter name="DeepJetFeatures_Charged" type="StringVec"> ChargedTrackMomentumFrac ChargedTrackPtRelJet ChargedTrackJetDotProductNorm ChargedDeltaRJetTrackRapidity IsElectron
    IsMuon ChargedD0Sig ChargedD0 ChargedZ0 ChargedZ0Sig Charged3DImpactPar Charged3DImpactParSig ChargedChi2NDF ChargedTrackUsedinPrimVertex LeptonMomRelJet LeptonPtRelJet LeptonMomFraction 
    Kaoness WeightedKaonnessMomFrac </parameter>
  <parameter name="DeepJetFeatures_Neutral" type="StringVec"> NeutralMomentumConstituent NeutralDeltaRJet NeutralHCalFrac NeutralMomentumFrac IsPhoton </parameter>
  <parameter name="DeepJetFeatures_SV" type="StringVec"> SecondaryVertexMass SecondaryVertexNTracks SecondaryVertexChi2 SecondaryVertexNDF SecondaryVertexEnergy SecondaryVertexDeltaRJetAxis
    SecondaryVertexEnergyJetEnergy SecondaryVertexCosMomPos SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig </parameter>
</processor>
 
<processor name="ParticleNetTagger_5J" type="ParticleNetTaggerProcessor">
  <!--ParticleNetTaggerProcessor offers Jet tagging using a Deep-Learning model-->
  <!--Torch script file describing the model-->
  <parameter name="ModelScriptFile" type="string"> models/particlenet.pt </parameter>
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/particlenet_test.pt </parameter>-->
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/example_module.pt </parameter> -->
  <!--File containing the parameters for pre-processing-->
  <parameter name="PreprocessingParamsFile" type="string"> dl_jet_tagger_pre_proc_params.txt </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  <parameter name="CollectionRefinedJets" type="string" value="Refined5Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex5Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet</parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> RapidityRelJet Rapidity PhiRelJet TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig Charge
  IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton D0bprob D0cprob D0qprob Z0bprob 
  Z0cprob Z0qprob UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac
  JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis</parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexRapidity SecondaryVertexPhiJetAxis SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig SecondaryVertexCosMomPos
  SecondaryVertexEnergyJetEnergy SecondaryVertexEnergy </parameter>
  <parameter name="MeanPFFeatures" type="FloatVec"> -7.29761758e-05 -4.90586780e-04  2.13698741e-03 -4.85899334e-02
    1.55332571e-01 -1.70381662e+00 -1.72863238e+00  3.98157854e-01
   -5.64316368e+00 -4.33297919e+00 -5.58491714e+00 -5.54083471e+00
   -1.23558220e+00  3.77338024e+01  3.53744694e-03  3.61168603e-02
    5.44658670e-03  3.99160210e-01  1.24098596e-01  4.35177747e-01
   -5.53569693e+00 -5.56372828e+00 -5.55553654e+00 -5.43602715e+00
   -5.51979248e+00 -5.52802548e+00 -5.31413136e+00 -3.92395558e+00
   -5.41138463e+00 -5.08574942e+00 -5.56832463e+00 -5.58195263e+00
   -3.66299027e+00 -4.36298817e+00</parameter>
   <parameter name="MeanSVFeatures" type="FloatVec"> 9.50258040e-04 5.84343269e-03 8.82074831e-05 1.02138306e+00
    1.12825104e+00 2.80497551e+00 1.33534754e+01 4.48843851e+00
    7.80911041e+11 8.06027962e+00 1.21880239e+12 9.78663636e-01
    2.65825129e-01 2.09486003e+01 </parameter>
    <parameter name="StdPFFeatures" type="FloatVec"> 4.63464098e-01 1.14537800e+00 5.08248809e-01 5.93276019e-01
     5.56418085e-01 5.92653891e-01 5.72287883e-01 4.21164822e-01
     2.12213643e+01 6.67180698e+02 2.35735079e+01 7.18364247e+02
     3.18062710e+01 7.90407970e+02 6.63860786e-01 1.86580901e-01
     7.35997377e-02 4.89725777e-01 3.29694002e-01 4.95780269e-01
     5.03142623e+00 4.99806323e+00 5.00808600e+00 5.14448399e+00
     5.04771499e+00 5.03882330e+00 5.28831488e+00 8.16289406e+00
     5.17188338e+00 5.59991318e+00 4.99269040e+00 4.97699012e+00
     8.59563093e+00 5.01705123e+00 </parameter>
    <parameter name="StdSVFeatures" type="FloatVec"> 1.74785539e-01 8.62445944e-01 1.94874110e-01 4.00349924e-01
     8.71161959e-01 1.39115375e+00 4.40525001e+02 1.17934104e+01
     4.54040549e+14 2.04232077e+03 7.11264431e+14 1.10007142e-01
     1.75591528e-01 1.85614393e+01 </parameter>
</processor>

<processor name="ParticleIDFilter_5J" type="ReconstructedParticleParticleIDFilterProcessor">
    <parameter name="RecoParticleCollection" type="string" value="PandoraPFOs"/>
    <parameter name="FilterPIDAlgos" type="StringVev" value="mlflavortagging_deepjet_charged mlflavortagging_deepjet_jets mlflavortagging_deepjet_neutral mlflavortagging_deepjet_sv mlflavortagging_pf_features mlflavortagging_pf_points mlflavortagging_sv_features mlflavortagging_sv_points"/>
    <parameter name="Verbosity" type="string" value="DEBUG"/>
</processor>

<processor name="StoreVariablesForDeepMLFlavorTagger_6J" type="StoreVariablesForDeepMLFlavorTagger">
  <parameter name="CollectionPrimaryVertex" type="string" value="PrimaryVertex" />
  <parameter name="CollectionRefinedJets" type="string" value="Refined6Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex6Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="D0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/d0probv2_ildl5_6q500.root"/> <!-- vtxprob/d0probv2_ildl5_6q500.root -->
  <parameter name="Z0ProbFileName" type="string" value="../../LCFIPlusConfig/vtxprob/z0probv2_ildl5_6q500.root"/>
  <parameter name="dEdxPID" type="string" value="dEdxPIDv2"/>
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet </parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet Charge IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton 
  RapidityRelJet PhiRelJet Rapidity D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig D0bprob D0cprob D0qprob Z0bprob Z0cprob Z0qprob
  UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis </parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks 
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig 
  SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis SecondaryVertexCosMomPos SecondaryVertexEnergyJetEnergy
  SecondaryVertexEnergy SecondaryVertexRapidity JetRapidity </parameter> 
  <parameter name="DeepJetFeatures_Jets" type="StringVec"> JetPt JetMomentum NCharged NNeutral NSecondaryVertices </parameter>
  <parameter name="DeepJetFeatures_Charged" type="StringVec"> ChargedTrackMomentumFrac ChargedTrackPtRelJet ChargedTrackJetDotProductNorm ChargedDeltaRJetTrackRapidity IsElectron
    IsMuon ChargedD0Sig ChargedD0 ChargedZ0 ChargedZ0Sig Charged3DImpactPar Charged3DImpactParSig ChargedChi2NDF ChargedTrackUsedinPrimVertex LeptonMomRelJet LeptonPtRelJet LeptonMomFraction 
    Kaoness WeightedKaonnessMomFrac </parameter>
  <parameter name="DeepJetFeatures_Neutral" type="StringVec"> NeutralMomentumConstituent NeutralDeltaRJet NeutralHCalFrac NeutralMomentumFrac IsPhoton </parameter>
  <parameter name="DeepJetFeatures_SV" type="StringVec"> SecondaryVertexMass SecondaryVertexNTracks SecondaryVertexChi2 SecondaryVertexNDF SecondaryVertexEnergy SecondaryVertexDeltaRJetAxis
    SecondaryVertexEnergyJetEnergy SecondaryVertexCosMomPos SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig </parameter>
</processor>
 
<processor name="ParticleNetTagger_6J" type="ParticleNetTaggerProcessor">
  <!--ParticleNetTaggerProcessor offers Jet tagging using a Deep-Learning model-->
  <!--Torch script file describing the model-->
  <parameter name="ModelScriptFile" type="string"> models/particlenet.pt </parameter>
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/particlenet_test.pt </parameter>-->
  <!--<parameter name="ModelScriptFile" type="string">/nfs/dust/ilc/user/mameyer/iLCSoft_new/MarlinML/python/example_module.pt </parameter> -->
  <!--File containing the parameters for pre-processing-->
  <parameter name="PreprocessingParamsFile" type="string"> dl_jet_tagger_pre_proc_params.txt </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  <parameter name="CollectionRefinedJets" type="string" value="Refined6Jets"> </parameter>
  <parameter name="CollectionRefinedVertices" type="string" value="RefinedVertex6Jets" />
  <parameter name="CollectionPFOs" type="string" value="PandoraPFOs" /> 
  <parameter name="ParticleNetFeatures_PFPoints" type="StringVec"> RapidityRelJet PhiRelJet</parameter>
  <parameter name="ParticleNetFeatures_PFFeatures" type="StringVec"> RapidityRelJet Rapidity PhiRelJet TransverseMomentumConstituentLOG EnergyConstituentLOG 
  TransverseMomentumFracConstituentLOG EnergyFracLOG DeltaRJet D0 D0Sig Z0 Z0Sig 3DImpactPar 3DImpactParSig Charge
  IsElectron IsMuon IsChargedHadron IsNeutralHadron IsPhoton D0bprob D0cprob D0qprob Z0bprob 
  Z0cprob Z0qprob UsedinPrimVertex LeptonMomRelJet Kaoness Chi2NDF LeptonMomFraction WeightedKaonnessMomFrac
  JetDotProductNorm HCalFrac </parameter>
  <parameter name="ParticleNetFeatures_SVPoints" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexPhiJetAxis</parameter>
  <parameter name="ParticleNetFeatures_SVFeatures" type="StringVec"> SecondaryVertexRapidityJetAxis SecondaryVertexRapidity SecondaryVertexPhiJetAxis SecondaryVertexPtLOG SecondaryVertexMass SecondaryVertexNTracks
  SecondaryVertexChi2NDF SecondaryVertexD0 SecondaryVertexD0Sig SecondaryVertexImpactPar3d SecondaryVertexImpactPar3dSig SecondaryVertexCosMomPos
  SecondaryVertexEnergyJetEnergy SecondaryVertexEnergy </parameter>
  <parameter name="MeanPFFeatures" type="FloatVec"> -7.29761758e-05 -4.90586780e-04  2.13698741e-03 -4.85899334e-02
    1.55332571e-01 -1.70381662e+00 -1.72863238e+00  3.98157854e-01
   -5.64316368e+00 -4.33297919e+00 -5.58491714e+00 -5.54083471e+00
   -1.23558220e+00  3.77338024e+01  3.53744694e-03  3.61168603e-02
    5.44658670e-03  3.99160210e-01  1.24098596e-01  4.35177747e-01
   -5.53569693e+00 -5.56372828e+00 -5.55553654e+00 -5.43602715e+00
   -5.51979248e+00 -5.52802548e+00 -5.31413136e+00 -3.92395558e+00
   -5.41138463e+00 -5.08574942e+00 -5.56832463e+00 -5.58195263e+00
   -3.66299027e+00 -4.36298817e+00</parameter>
   <parameter name="MeanSVFeatures" type="FloatVec"> 9.50258040e-04 5.84343269e-03 8.82074831e-05 1.02138306e+00
    1.12825104e+00 2.80497551e+00 1.33534754e+01 4.48843851e+00
    7.80911041e+11 8.06027962e+00 1.21880239e+12 9.78663636e-01
    2.65825129e-01 2.09486003e+01 </parameter>
    <parameter name="StdPFFeatures" type="FloatVec"> 4.63464098e-01 1.14537800e+00 5.08248809e-01 5.93276019e-01
     5.56418085e-01 5.92653891e-01 5.72287883e-01 4.21164822e-01
     2.12213643e+01 6.67180698e+02 2.35735079e+01 7.18364247e+02
     3.18062710e+01 7.90407970e+02 6.63860786e-01 1.86580901e-01
     7.35997377e-02 4.89725777e-01 3.29694002e-01 4.95780269e-01
     5.03142623e+00 4.99806323e+00 5.00808600e+00 5.14448399e+00
     5.04771499e+00 5.03882330e+00 5.28831488e+00 8.16289406e+00
     5.17188338e+00 5.59991318e+00 4.99269040e+00 4.97699012e+00
     8.59563093e+00 5.01705123e+00 </parameter>
    <parameter name="StdSVFeatures" type="FloatVec"> 1.74785539e-01 8.62445944e-01 1.94874110e-01 4.00349924e-01
     8.71161959e-01 1.39115375e+00 4.40525001e+02 1.17934104e+01
     4.54040549e+14 2.04232077e+03 7.11264431e+14 1.10007142e-01
     1.75591528e-01 1.85614393e+01 </parameter>
</processor>

<processor name="ParticleIDFilter_6J" type="ReconstructedParticleParticleIDFilterProcessor">
    <parameter name="RecoParticleCollection" type="string" value="PandoraPFOs"/>
    <parameter name="FilterPIDAlgos" type="StringVev" value="mlflavortagging_deepjet_charged mlflavortagging_deepjet_jets mlflavortagging_deepjet_neutral mlflavortagging_deepjet_sv mlflavortagging_pf_features mlflavortagging_pf_points mlflavortagging_sv_features mlflavortagging_sv_points"/>
    <parameter name="Verbosity" type="string" value="DEBUG"/>
</processor>

<processor name="LCIOOutputProcessor" type="LCIOOutputProcessor">
  <!-- DST output: drop all hits, skim MCParticles and keep final Tracks, Clusters, Vertices and  ReconstructedParticles -->
  <parameter name="LCIOOutputFile" type="string" >
    ${OutputFile}
  </parameter>
  <parameter name="DropCollectionTypes" type="StringVec">
    Track
    Cluster
  </parameter>
  <parameter name="DropCollectionNames" type="StringVec">
    ClusterMCTruthLink
    MCTruthClusterLink
    MCTruthMarlinTrkTracksLink
    MarlinTrkTracksMCTruthLink
    DistilledPFOs
    GammaGammaCandidateEtaPrimes
    GammaGammaCandidateEtas
    GammaGammaCandidatePi0s
    GammaGammaParticles
    V0RecoParticles
    V0Vertices
    ProngRecoParticles
    ProngVertices
    KinkRecoParticles
    KinkVertices
    SplitRecoParticles
    SplitVertices
    BuildUpVertex_RP
    BuildUpVertex
    BuildUpVertex_V0_RP
    BuildUpVertex_V0
    PFOsminusmu
    PFOsminuse
    PFOsminustau
    PFOsminusphoton
    Vertex2Jets
    Vertex3Jets
    Vertex4Jets
    Vertex5Jets
    Vertex6Jets
    Refined2Jets_rel
    Refined3Jets_rel
    Refined4Jets_rel
    Refined5Jets_rel
    Refined6Jets_rel
    Refined2Jets_vtx
    Refined3Jets_vtx
    Refined4Jets_vtx
    Refined5Jets_vtx
    Refined6Jets_vtx
    Refined2Jets_vtx_RP
    Refined3Jets_vtx_RP
    Refined4Jets_vtx_RP
    Refined5Jets_vtx_RP
    Refined6Jets_vtx_RP
    RefinedVertex2Jets
    RefinedVertex3Jets
    RefinedVertex4Jets
    RefinedVertex5Jets
    RefinedVertex6Jets
    RefinedVertex2Jets_RP
    RefinedVertex3Jets_RP
    RefinedVertex4Jets_RP
    RefinedVertex5Jets_RP
    RefinedVertex6Jets_RP
    Refined2JetsEF
    Refined3JetsEF
    Refined4JetsEF
    Refined5JetsEF
    Refined6JetsEF
    BCALMCTruthLink
    MCTruthBcalLink
    MCTruthTrackLink
    TrackMCTruthLink
  </parameter>
  <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
  <parameter name="CompressionLevel" type="int" value="6"/>
  <!--parameter name="SplitFileSizekB" type="int" value="1992294"/-->
</processor>

</marlin>
